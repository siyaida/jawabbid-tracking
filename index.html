<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jawabid v2 | Migration & Development Plan</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0a1628;--bg2:#0f1f35;--bg3:#162a46;
  --orange:#e8913a;--orange-glow:#e8913a55;
  --blue:#4a9eff;--blue-glow:#4a9eff44;
  --green:#22c55e;--green-bg:#22c55e18;
  --amber:#f59e0b;--amber-bg:#f59e0b18;
  --red:#ef4444;--red-bg:#ef444418;
  --purple:#a855f7;--purple-bg:#a855f718;
  --cyan:#06b6d4;--cyan-bg:#06b6d418;
  --text:#f1f5f9;--text2:#94a3b8;--text3:#64748b;
  --card:#0f1f35cc;--card-border:#1e3a5f;
  --font:'Inter',sans-serif;--mono:'JetBrains Mono',monospace;
}
html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:var(--orange) var(--bg)}
body{font-family:var(--font);background:var(--bg);color:var(--text);overflow-x:hidden;line-height:1.6}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--orange);border-radius:3px}

/* Three.js Canvas */
#bg-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none}

/* Navigation */
.nav{position:fixed;top:0;left:0;right:0;z-index:100;padding:16px 40px;display:flex;justify-content:space-between;align-items:center;backdrop-filter:blur(20px);background:rgba(10,22,40,0.7);border-bottom:1px solid rgba(232,145,58,0.1);transition:all 0.4s}
.nav.scrolled{padding:10px 40px;background:rgba(10,22,40,0.95)}
.nav-logo{font-weight:800;font-size:1.3rem;letter-spacing:-0.5px}
.nav-logo span{color:var(--orange)}
.nav-links{display:flex;gap:24px}
.nav-links a{color:var(--text2);text-decoration:none;font-size:0.85rem;font-weight:500;transition:color 0.3s;position:relative}
.nav-links a:hover,.nav-links a.active{color:var(--orange)}
.nav-links a::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:var(--orange);transition:width 0.3s}
.nav-links a:hover::after,.nav-links a.active::after{width:100%}

/* Scroll Progress */
.scroll-progress{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--orange),var(--blue));z-index:101;transition:width 0.1s}

/* Section base */
.section{position:relative;z-index:1;min-height:100vh;display:flex;align-items:center;padding:120px 60px 80px}
.section-inner{max-width:1200px;width:100%;margin:0 auto}

/* Reveal animations */
.reveal{opacity:0;transform:translateY(40px);transition:opacity 0.8s ease,transform 0.8s ease}
.reveal.visible{opacity:1;transform:translateY(0)}
.reveal-delay-1{transition-delay:0.15s}
.reveal-delay-2{transition-delay:0.3s}
.reveal-delay-3{transition-delay:0.45s}
.reveal-delay-4{transition-delay:0.6s}
.reveal-delay-5{transition-delay:0.75s}

/* Tags/Badges */
.tag{display:inline-block;padding:4px 12px;border-radius:20px;font-size:0.75rem;font-weight:600;letter-spacing:0.5px;text-transform:uppercase}
.tag-orange{background:var(--orange);color:#000}
.tag-blue{background:var(--blue);color:#000}

/* Section Labels */
.section-label{display:inline-flex;align-items:center;gap:8px;margin-bottom:16px;font-family:var(--mono);font-size:0.8rem;color:var(--orange);font-weight:600;letter-spacing:1px;text-transform:uppercase}
.section-label .dot{width:8px;height:8px;border-radius:50%;background:var(--orange);animation:pulse-dot 2s infinite}
@keyframes pulse-dot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.5;transform:scale(1.5)}}

.section-title{font-size:clamp(2rem,5vw,3.5rem);font-weight:800;letter-spacing:-1px;line-height:1.1;margin-bottom:16px}
.section-title span{background:linear-gradient(135deg,var(--orange),#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.section-subtitle{font-size:1.15rem;color:var(--text2);max-width:700px;line-height:1.7}

/* ===== HERO ===== */
.hero{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:relative;z-index:1;padding:0 40px}
.hero-badge{display:inline-flex;align-items:center;gap:8px;padding:8px 20px;border-radius:30px;border:1px solid var(--orange);background:rgba(232,145,58,0.08);font-size:0.85rem;color:var(--orange);font-weight:500;margin-bottom:32px;backdrop-filter:blur(10px)}
.hero-badge .pulse{width:8px;height:8px;border-radius:50%;background:var(--orange);animation:pulse-dot 2s infinite}
.hero h1{font-size:clamp(3rem,8vw,7rem);font-weight:900;letter-spacing:-3px;line-height:0.95;margin-bottom:8px}
.hero h1 .v2{background:linear-gradient(135deg,var(--orange),#fbbf24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero h2{font-size:clamp(1rem,2.5vw,1.5rem);font-weight:400;color:var(--text2);margin-bottom:40px;letter-spacing:1px}
.hero-stats{display:flex;gap:48px;margin-bottom:48px;flex-wrap:wrap;justify-content:center}
.hero-stat{text-align:center}
.hero-stat .num{font-family:var(--mono);font-size:2.5rem;font-weight:700;color:var(--orange);line-height:1}
.hero-stat .label{font-size:0.8rem;color:var(--text3);margin-top:4px;text-transform:uppercase;letter-spacing:1px}
.hero-arrow{position:absolute;bottom:40px;left:50%;transform:translateX(-50%);animation:bounce-down 2s infinite}
@keyframes bounce-down{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(12px)}}
.hero-arrow svg{width:24px;height:24px;stroke:var(--text3);stroke-width:2;fill:none}

/* ===== TRANSFORMATION ===== */
.transform-grid{display:grid;grid-template-columns:1fr auto 1fr;gap:32px;align-items:center;margin-top:48px}
.transform-card{background:var(--card);border:1px solid var(--card-border);border-radius:16px;padding:36px;position:relative;overflow:hidden}
.transform-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
.transform-card.v1::before{background:linear-gradient(90deg,var(--red),var(--amber))}
.transform-card.v2::before{background:linear-gradient(90deg,var(--green),var(--cyan))}
.transform-card h3{font-size:1.4rem;font-weight:700;margin-bottom:8px}
.transform-card .version-tag{font-family:var(--mono);font-size:0.75rem;padding:4px 10px;border-radius:6px;margin-bottom:16px;display:inline-block}
.v1 .version-tag{background:var(--red-bg);color:var(--red)}
.v2 .version-tag{background:var(--green-bg);color:var(--green)}
.transform-card p{color:var(--text2);font-size:0.95rem;line-height:1.7}
.transform-card ul{list-style:none;margin-top:16px}
.transform-card ul li{padding:8px 0;color:var(--text2);font-size:0.9rem;display:flex;align-items:flex-start;gap:10px;border-bottom:1px solid rgba(255,255,255,0.04)}
.transform-card ul li:last-child{border:none}
.transform-card ul li .icon{flex-shrink:0;margin-top:2px}
.transform-arrow{display:flex;flex-direction:column;align-items:center;gap:8px;color:var(--orange)}
.transform-arrow .arrow-line{width:2px;height:60px;background:linear-gradient(to bottom,var(--orange),transparent)}
.transform-arrow svg{width:48px;height:48px;filter:drop-shadow(0 0 12px var(--orange-glow))}
.transform-arrow span{font-size:0.75rem;font-weight:600;text-transform:uppercase;letter-spacing:2px;writing-mode:vertical-rl;text-orientation:mixed}

/* ===== ADVANTAGE ===== */
.advantage-grid{display:grid;grid-template-columns:1fr 1fr;gap:48px;margin-top:48px;align-items:center}
.donut-container{position:relative;width:280px;height:280px;margin:0 auto}
.donut-container svg{width:100%;height:100%;transform:rotate(-90deg)}
.donut-track{fill:none;stroke:var(--bg3);stroke-width:20}
.donut-fill{fill:none;stroke:var(--orange);stroke-width:20;stroke-linecap:round;stroke-dasharray:0 628;transition:stroke-dasharray 2s ease}
.donut-fill.animate{stroke-dasharray:502 628}
.donut-center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}
.donut-center .pct{font-family:var(--mono);font-size:3rem;font-weight:800;color:var(--orange)}
.donut-center .lbl{font-size:0.8rem;color:var(--text3);text-transform:uppercase;letter-spacing:1px}
.advantage-cards{display:flex;flex-direction:column;gap:16px}
.adv-card{display:flex;align-items:center;gap:16px;padding:20px 24px;border-radius:12px;background:var(--card);border:1px solid var(--card-border);transition:all 0.3s}
.adv-card:hover{border-color:var(--orange);transform:translateX(4px)}
.adv-card .adv-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0}
.adv-card .adv-num{font-family:var(--mono);font-size:1.6rem;font-weight:700;color:var(--text);min-width:80px}
.adv-card .adv-text{font-size:0.9rem;color:var(--text2)}

/* ===== FEATURES ===== */
.features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:48px}
.feature-card{background:var(--card);border:1px solid var(--card-border);border-radius:16px;padding:32px;position:relative;overflow:hidden;transition:all 0.4s;cursor:default}
.feature-card:hover{border-color:var(--orange);transform:translateY(-4px);box-shadow:0 20px 40px rgba(0,0,0,0.3)}
.feature-card .feature-num{font-family:var(--mono);font-size:3.5rem;font-weight:800;position:absolute;top:12px;right:20px;color:rgba(232,145,58,0.08);line-height:1}
.feature-card .feature-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-bottom:16px;background:var(--orange);background:linear-gradient(135deg,rgba(232,145,58,0.15),rgba(232,145,58,0.05));border:1px solid rgba(232,145,58,0.2)}
.feature-card h3{font-size:1.1rem;font-weight:700;margin-bottom:8px}
.feature-card p{font-size:0.85rem;color:var(--text2);line-height:1.6}
.feature-card .feature-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px}
.feature-card .feature-tags span{font-size:0.7rem;padding:3px 8px;border-radius:4px;background:rgba(255,255,255,0.05);color:var(--text3);font-family:var(--mono)}

/* ===== AI PIPELINE ===== */
.pipeline-container{margin-top:48px}
.pipeline-flow{display:flex;align-items:center;gap:0;margin-bottom:48px;overflow-x:auto;padding:20px 0}
.pipeline-node{flex-shrink:0;width:220px;background:var(--card);border:2px solid var(--card-border);border-radius:16px;padding:24px;text-align:center;position:relative;transition:all 0.4s}
.pipeline-node:hover{border-color:var(--cyan);transform:scale(1.05);box-shadow:0 0 30px rgba(6,182,212,0.15)}
.pipeline-node .node-num{font-family:var(--mono);font-size:0.75rem;color:var(--cyan);font-weight:700;margin-bottom:8px;letter-spacing:2px}
.pipeline-node h4{font-size:0.95rem;font-weight:700;margin-bottom:8px;color:var(--text)}
.pipeline-node p{font-size:0.78rem;color:var(--text3);line-height:1.5}
.pipeline-node .node-icon{font-size:2rem;margin-bottom:8px}
.pipeline-connector{flex-shrink:0;width:60px;height:2px;background:linear-gradient(90deg,var(--cyan),var(--blue));position:relative}
.pipeline-connector::after{content:'';position:absolute;right:-4px;top:-4px;width:0;height:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:8px solid var(--blue)}
.pipeline-steps{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-top:32px}
.pipeline-step{padding:16px;background:var(--card);border:1px solid var(--card-border);border-radius:10px;text-align:center;transition:all 0.3s;position:relative}
.pipeline-step:hover{border-color:var(--blue)}
.pipeline-step .step-num{font-family:var(--mono);font-size:2rem;font-weight:800;color:rgba(74,158,255,0.15);line-height:1}
.pipeline-step .step-title{font-size:0.8rem;font-weight:600;margin-top:4px;color:var(--text)}
.pipeline-step .step-desc{font-size:0.7rem;color:var(--text3);margin-top:4px}

/* ===== WORKFLOW ===== */
.workflow-stages{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-top:48px}
.wf-stage{position:relative;background:var(--card);border:1px solid var(--card-border);border-radius:16px;padding:28px;text-align:center;transition:all 0.4s}
.wf-stage:hover{transform:translateY(-6px);box-shadow:0 20px 40px rgba(0,0,0,0.3)}
.wf-stage::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;border-radius:16px 16px 0 0}
.wf-stage:nth-child(1)::before{background:var(--blue)}
.wf-stage:nth-child(2)::before{background:var(--amber)}
.wf-stage:nth-child(3)::before{background:var(--green)}
.wf-stage:nth-child(4)::before{background:var(--orange)}
.wf-stage:nth-child(1):hover{border-color:var(--blue)}
.wf-stage:nth-child(2):hover{border-color:var(--amber)}
.wf-stage:nth-child(3):hover{border-color:var(--green)}
.wf-stage:nth-child(4):hover{border-color:var(--orange)}
.wf-stage .stage-num{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;font-family:var(--mono);font-weight:700;font-size:1.1rem}
.wf-stage:nth-child(1) .stage-num{background:rgba(74,158,255,0.15);color:var(--blue)}
.wf-stage:nth-child(2) .stage-num{background:rgba(245,158,11,0.15);color:var(--amber)}
.wf-stage:nth-child(3) .stage-num{background:rgba(34,197,94,0.15);color:var(--green)}
.wf-stage:nth-child(4) .stage-num{background:rgba(232,145,58,0.15);color:var(--orange)}
.wf-stage h4{font-size:1rem;font-weight:700;margin-bottom:4px}
.wf-stage .wf-role{font-family:var(--mono);font-size:0.75rem;color:var(--text3);margin-bottom:12px}
.wf-stage p{font-size:0.8rem;color:var(--text2);line-height:1.5}
.wf-stage .wf-actions{display:flex;flex-wrap:wrap;gap:4px;justify-content:center;margin-top:12px}
.wf-stage .wf-actions span{font-size:0.65rem;padding:3px 8px;border-radius:4px;background:rgba(255,255,255,0.05);color:var(--text3);font-family:var(--mono)}

/* ===== TIMELINE ===== */
.timeline{margin-top:48px;position:relative}
.timeline::before{content:'';position:absolute;left:32px;top:0;bottom:0;width:2px;background:linear-gradient(to bottom,var(--orange),var(--blue),var(--green))}
.timeline-item{display:flex;gap:40px;padding:24px 0;position:relative}
.timeline-dot{width:64px;height:64px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-family:var(--mono);font-weight:800;font-size:0.9rem;position:relative;z-index:1;border:3px solid}
.timeline-item:nth-child(1) .timeline-dot{background:rgba(232,145,58,0.15);border-color:var(--orange);color:var(--orange)}
.timeline-item:nth-child(2) .timeline-dot{background:rgba(239,68,68,0.15);border-color:var(--red);color:var(--red)}
.timeline-item:nth-child(3) .timeline-dot{background:rgba(74,158,255,0.15);border-color:var(--blue);color:var(--blue)}
.timeline-item:nth-child(4) .timeline-dot{background:rgba(168,85,247,0.15);border-color:var(--purple);color:var(--purple)}
.timeline-item:nth-child(5) .timeline-dot{background:rgba(6,182,212,0.15);border-color:var(--cyan);color:var(--cyan)}
.timeline-item:nth-child(6) .timeline-dot{background:rgba(34,197,94,0.15);border-color:var(--green);color:var(--green)}
.timeline-content{flex:1;background:var(--card);border:1px solid var(--card-border);border-radius:14px;padding:28px;transition:all 0.3s}
.timeline-content:hover{border-color:rgba(232,145,58,0.3);transform:translateX(4px)}
.timeline-content .tl-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;flex-wrap:wrap;gap:8px}
.timeline-content h4{font-size:1.1rem;font-weight:700}
.timeline-content .tl-days{font-family:var(--mono);font-size:0.8rem;padding:4px 12px;border-radius:6px;background:rgba(232,145,58,0.1);color:var(--orange)}
.timeline-content .tl-hours{font-family:var(--mono);font-size:0.85rem;color:var(--text3)}
.timeline-content p{font-size:0.85rem;color:var(--text2);margin-top:8px}
.timeline-content .tl-tasks{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px}
.timeline-content .tl-tasks span{font-size:0.72rem;padding:4px 10px;border-radius:6px;background:rgba(255,255,255,0.04);color:var(--text3);border:1px solid rgba(255,255,255,0.06)}
.progress-bar{width:100%;height:6px;background:var(--bg3);border-radius:3px;margin-top:12px;overflow:hidden}
.progress-bar .fill{height:100%;border-radius:3px;transition:width 1.5s ease;width:0}

/* ===== RISKS ===== */
.risks-grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:48px}
.risk-row{display:grid;grid-template-columns:2fr 100px 100px 3fr;gap:16px;align-items:center;padding:20px 24px;background:var(--card);border:1px solid var(--card-border);border-radius:12px;transition:all 0.3s}
.risk-row:hover{border-color:rgba(232,145,58,0.3);transform:translateX(4px)}
.risk-row .risk-name{font-weight:600;font-size:0.95rem}
.risk-row .risk-badge{padding:4px 10px;border-radius:6px;font-size:0.75rem;font-weight:600;text-align:center;font-family:var(--mono)}
.risk-high{background:var(--red-bg);color:var(--red)}
.risk-medium{background:var(--amber-bg);color:var(--amber)}
.risk-low{background:var(--green-bg);color:var(--green)}
.risk-row .risk-mitigation{font-size:0.85rem;color:var(--text2)}

/* ===== FILE MATRIX ===== */
.matrix-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-top:48px}
.matrix-card{background:var(--card);border:1px solid var(--card-border);border-radius:14px;padding:28px;text-align:center;transition:all 0.4s}
.matrix-card:hover{transform:translateY(-4px);box-shadow:0 16px 32px rgba(0,0,0,0.3)}
.matrix-card .mc-num{font-family:var(--mono);font-size:2.8rem;font-weight:800;line-height:1}
.matrix-card .mc-label{font-size:0.8rem;color:var(--text3);margin-top:6px;text-transform:uppercase;letter-spacing:1px}
.mc-keep .mc-num{color:var(--green)}
.mc-keep{border-color:rgba(34,197,94,0.2)}
.mc-modify .mc-num{color:var(--blue)}
.mc-modify{border-color:rgba(74,158,255,0.2)}
.mc-rewrite .mc-num{color:var(--amber)}
.mc-rewrite{border-color:rgba(245,158,11,0.2)}
.mc-remove .mc-num{color:var(--red)}
.mc-remove{border-color:rgba(239,68,68,0.2)}
.mc-create .mc-num{color:var(--purple)}
.mc-create{border-color:rgba(168,85,247,0.2)}

/* ===== COMPARISON TABLE ===== */
.comparison-table{width:100%;border-collapse:separate;border-spacing:0;margin-top:48px;border-radius:12px;overflow:hidden}
.comparison-table thead th{background:var(--bg3);padding:14px 20px;font-size:0.8rem;text-transform:uppercase;letter-spacing:1px;color:var(--text2);font-weight:600;text-align:left}
.comparison-table thead th:nth-child(2){color:var(--red)}
.comparison-table thead th:nth-child(3){color:var(--green)}
.comparison-table tbody td{padding:14px 20px;border-bottom:1px solid rgba(255,255,255,0.04);font-size:0.9rem}
.comparison-table tbody td:first-child{font-weight:600;color:var(--text)}
.comparison-table tbody td:nth-child(2){color:var(--text3)}
.comparison-table tbody td:nth-child(3){color:var(--cyan)}
.comparison-table tbody tr:hover{background:rgba(255,255,255,0.02)}

/* ===== CTA / SUMMARY ===== */
.summary-box{background:linear-gradient(135deg,rgba(232,145,58,0.08),rgba(74,158,255,0.08));border:1px solid rgba(232,145,58,0.2);border-radius:20px;padding:48px;text-align:center;margin-top:48px}
.summary-box h3{font-size:2rem;font-weight:800;margin-bottom:16px}
.summary-stats{display:flex;justify-content:center;gap:64px;margin:32px 0;flex-wrap:wrap}
.summary-stat .num{font-family:var(--mono);font-size:3rem;font-weight:800;background:linear-gradient(135deg,var(--orange),var(--amber));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.summary-stat .label{font-size:0.85rem;color:var(--text2)}

/* Callout box */
.callout{background:rgba(232,145,58,0.06);border-left:4px solid var(--orange);border-radius:0 10px 10px 0;padding:20px 24px;margin-top:24px}
.callout h4{font-size:0.95rem;font-weight:700;color:var(--orange);margin-bottom:6px}
.callout p{font-size:0.85rem;color:var(--text2);line-height:1.6}

/* Footer */
.footer{position:relative;z-index:1;text-align:center;padding:40px;border-top:1px solid var(--card-border);color:var(--text3);font-size:0.8rem}

/* ===== LOGIN OVERLAY ===== */
.login-overlay{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;background:var(--bg);display:flex;align-items:center;justify-content:center;transition:opacity 0.5s,visibility 0.5s}
.login-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}
.login-box{background:var(--card);border:1px solid var(--card-border);border-radius:20px;padding:48px;width:100%;max-width:400px;text-align:center;box-shadow:0 40px 80px rgba(0,0,0,0.5)}
.login-box h2{font-size:1.8rem;font-weight:800;margin-bottom:8px;letter-spacing:-0.5px}
.login-box h2 span{color:var(--orange)}
.login-box p{color:var(--text3);font-size:0.9rem;margin-bottom:32px}
.login-field{width:100%;padding:14px 18px;border:1px solid var(--card-border);border-radius:10px;background:var(--bg2);color:var(--text);font-family:var(--font);font-size:0.95rem;outline:none;transition:border-color 0.3s;margin-bottom:12px}
.login-field:focus{border-color:var(--orange)}
.login-field::placeholder{color:var(--text3)}
.login-btn{width:100%;padding:14px;border:none;border-radius:10px;background:linear-gradient(135deg,var(--orange),#f59e0b);color:#000;font-family:var(--font);font-size:1rem;font-weight:700;cursor:pointer;transition:transform 0.2s,box-shadow 0.2s;margin-top:8px}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px var(--orange-glow)}
.login-btn:active{transform:translateY(0)}
.login-error{color:var(--red);font-size:0.85rem;margin-top:12px;min-height:20px;opacity:0;transition:opacity 0.3s}
.login-error.show{opacity:1}

/* ===== RESPONSIVE ===== */
@media(max-width:1024px){
  .section{padding:100px 32px 60px}
  .transform-grid{grid-template-columns:1fr;gap:16px}
  .transform-arrow{transform:rotate(90deg);padding:16px 0}
  .advantage-grid{grid-template-columns:1fr}
  .workflow-stages{grid-template-columns:1fr 1fr}
  .pipeline-flow{flex-direction:column;align-items:stretch}
  .pipeline-connector{width:2px;height:30px;margin:0 auto}
  .pipeline-connector::after{display:none}
  .pipeline-node{width:100%}
  .matrix-grid{grid-template-columns:repeat(3,1fr)}
  .risk-row{grid-template-columns:1fr;gap:8px}
  .pipeline-steps{grid-template-columns:repeat(3,1fr)}
  .comparison-table{font-size:0.8rem}
}
@media(max-width:640px){
  .section{padding:80px 20px 40px}
  .nav{padding:12px 20px}
  .nav-links{display:none}
  .hero-stats{gap:24px}
  .workflow-stages{grid-template-columns:1fr}
  .matrix-grid{grid-template-columns:1fr 1fr}
  .timeline::before{left:16px}
  .timeline-dot{width:48px;height:48px;font-size:0.75rem}
  .features-grid{grid-template-columns:1fr}
  .summary-stats{gap:32px}
  .pipeline-steps{grid-template-columns:1fr 1fr}
}
</style>
</head>
<body>

<!-- Login Overlay -->
<div class="login-overlay" id="loginOverlay">
  <div class="login-box">
    <h2>JAWABID <span>v2</span></h2>
    <p>Enter your credentials to continue</p>
    <input type="text" class="login-field" id="loginUser" placeholder="Username" autocomplete="off">
    <input type="password" class="login-field" id="loginPass" placeholder="Password">
    <button class="login-btn" id="loginBtn">Sign In</button>
    <div class="login-error" id="loginError">Invalid credentials. Please try again.</div>
  </div>
</div>

<!-- Scroll Progress Bar -->
<div class="scroll-progress" id="scrollProgress"></div>

<!-- Navigation -->
<nav class="nav" id="nav">
  <div class="nav-logo">JAWABID <span>v2</span></div>
  <div class="nav-links">
    <a href="#hero">Overview</a>
    <a href="#transform">Transformation</a>
    <a href="#advantage">Advantage</a>
    <a href="#features">Features</a>
    <a href="#pipeline">AI Pipeline</a>
    <a href="#workflow">Workflow</a>
    <a href="#timeline">Timeline</a>
    <a href="#risks">Risks</a>
    <a href="#matrix">Files</a>
  </div>
</nav>

<!-- Three.js Background Canvas -->
<canvas id="bg-canvas"></canvas>

<!-- ===== HERO ===== -->
<section class="hero" id="hero">
  <div class="hero-badge reveal"><span class="pulse"></span> Migration & Development Plan</div>
  <h1 class="reveal reveal-delay-1">JAWABID <span class="v2">v2</span></h1>
  <h2 class="reveal reveal-delay-2">Proposal Evaluation & Management System</h2>
  <div class="hero-stats reveal reveal-delay-3">
    <div class="hero-stat"><div class="num" data-count="80">0</div><div class="label">% Code Reuse</div></div>
    <div class="hero-stat"><div class="num" data-count="10">0</div><div class="label">Working Days</div></div>
    <div class="hero-stat"><div class="num" data-count="105">0</div><div class="label">Dev Hours</div></div>
    <div class="hero-stat"><div class="num" data-count="42">0</div><div class="label">New Files</div></div>
  </div>
  <p class="reveal reveal-delay-4" style="color:var(--text3);max-width:600px;font-size:0.95rem">
    Transforming our RFP Response system into a Proposal Evaluation powerhouse.<br>
    <span style="color:var(--text2)">AI-assisted development with Claude Code. 3 developers. 7-10 days.</span>
  </p>
  <div class="hero-arrow">
    <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
  </div>
</section>

<!-- ===== THE TRANSFORMATION ===== -->
<section class="section" id="transform">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> Core Concept Change</div>
    <h2 class="section-title reveal reveal-delay-1">The <span>Transformation</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">We're flipping the entire perspective. From creating proposals to evaluating them.</p>

    <div class="transform-grid">
      <div class="transform-card v1 reveal">
        <span class="version-tag">V1 - CURRENT</span>
        <h3>RFP Response System</h3>
        <p>Company receives an RFP, uploads it, generates questions, collects answers, produces a proposal.</p>
        <ul>
          <li><span class="icon" style="color:var(--red)">&#x2716;</span> Proposal writer / responder role</li>
          <li><span class="icon" style="color:var(--red)">&#x2716;</span> System generates 1 proposal</li>
          <li><span class="icon" style="color:var(--red)">&#x2716;</span> AI generates proposal content</li>
          <li><span class="icon" style="color:var(--red)">&#x2716;</span> Output: finished proposal document</li>
          <li><span class="icon" style="color:var(--red)">&#x2716;</span> Question assignment workflow</li>
        </ul>
      </div>

      <div class="transform-arrow reveal reveal-delay-2">
        <svg viewBox="0 0 48 48"><circle cx="24" cy="24" r="22" fill="none" stroke="currentColor" stroke-width="2"/><path d="M16 24h16M26 18l6 6-6 6" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <span>EVOLVE</span>
      </div>

      <div class="transform-card v2 reveal reveal-delay-3">
        <span class="version-tag">V2 - NEW</span>
        <h3>Proposal Evaluation System</h3>
        <p>Company issues an RFP, receives proposals, AI analyzes & compares them, recommends the best.</p>
        <ul>
          <li><span class="icon" style="color:var(--green)">&#x2714;</span> Proposal evaluator / buyer role</li>
          <li><span class="icon" style="color:var(--green)">&#x2714;</span> Users upload multiple proposals</li>
          <li><span class="icon" style="color:var(--green)">&#x2714;</span> AI analyzes &amp; compares proposals</li>
          <li><span class="icon" style="color:var(--green)">&#x2714;</span> Output: evaluation report &amp; ranking</li>
          <li><span class="icon" style="color:var(--green)">&#x2714;</span> Approval &amp; selection workflow</li>
        </ul>
      </div>
    </div>

    <!-- Comparison Table -->
    <table class="comparison-table reveal" style="margin-top:48px">
      <thead><tr><th>Aspect</th><th>v1 (Current)</th><th>v2 (New)</th></tr></thead>
      <tbody>
        <tr><td>User Role</td><td>Proposal writer / responder</td><td>Proposal evaluator / buyer</td></tr>
        <tr><td>RFP Handling</td><td>Analyze RFP to respond to it</td><td>Use RFP as evaluation criteria</td></tr>
        <tr><td>AI Purpose</td><td>Generate proposal content</td><td>Analyze &amp; compare proposals</td></tr>
        <tr><td>Output</td><td>Finished proposal document</td><td>Evaluation report &amp; ranking</td></tr>
        <tr><td>Workflow</td><td>Question assignment flow</td><td>Approval &amp; selection flow</td></tr>
        <tr><td>Teams</td><td>BUs answer questions</td><td>Evaluators review &amp; score</td></tr>
        <tr><td>Templates</td><td>Proposal templates with vars</td><td>Evaluation rubric templates</td></tr>
      </tbody>
    </table>
  </div>
</section>

<!-- ===== THE ADVANTAGE ===== -->
<section class="section" id="advantage">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> Key Advantage</div>
    <h2 class="section-title reveal reveal-delay-1">Smart <span>Reuse</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">80% of existing files are leveraged. We're not starting from scratch &mdash; we're evolving.</p>

    <div class="advantage-grid">
      <div class="donut-container reveal reveal-delay-3">
        <svg viewBox="0 0 200 200">
          <circle class="donut-track" cx="100" cy="100" r="80"/>
          <circle class="donut-fill" cx="100" cy="100" r="80" id="donutFill"/>
        </svg>
        <div class="donut-center">
          <div class="pct" id="donutPct">0%</div>
          <div class="lbl">Code Reuse</div>
        </div>
      </div>

      <div class="advantage-cards">
        <div class="adv-card reveal reveal-delay-1">
          <div class="adv-icon" style="background:var(--green-bg)">&#x1F504;</div>
          <div class="adv-num" style="color:var(--green)">129</div>
          <div class="adv-text">Files kept unchanged &mdash; auth, companies, UI components, contexts</div>
        </div>
        <div class="adv-card reveal reveal-delay-2">
          <div class="adv-icon" style="background:var(--blue-glow)">&#x270F;</div>
          <div class="adv-num" style="color:var(--blue)">34</div>
          <div class="adv-text">Files modified &mdash; adding evaluation fields, new endpoints, labels</div>
        </div>
        <div class="adv-card reveal reveal-delay-3">
          <div class="adv-icon" style="background:var(--amber-bg)">&#x1F527;</div>
          <div class="adv-num" style="color:var(--amber)">19</div>
          <div class="adv-text">Files rewritten &mdash; proposals, workflow, AI agents, dashboard</div>
        </div>
        <div class="adv-card reveal reveal-delay-4">
          <div class="adv-icon" style="background:var(--red-bg)">&#x1F5D1;</div>
          <div class="adv-num" style="color:var(--red)">~28</div>
          <div class="adv-text">Files removed &mdash; proposal generation, templates, question assignment</div>
        </div>
        <div class="adv-card reveal reveal-delay-5">
          <div class="adv-icon" style="background:var(--purple-bg)">&#x2728;</div>
          <div class="adv-num" style="color:var(--purple)">42</div>
          <div class="adv-text">New files created &mdash; evaluation engine, scoring, vendors, approval</div>
        </div>
      </div>
    </div>

    <div class="callout reveal" style="margin-top:36px">
      <h4>Without Claude Code</h4>
      <p>This migration would take <strong>25-35 working days</strong> for 3 developers. With AI-assisted development, we compress this to <strong>7-10 working days</strong> &mdash; a 3-5x acceleration.</p>
    </div>
  </div>
</section>

<!-- ===== NEW FEATURES ===== -->
<section class="section" id="features">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> New Capabilities</div>
    <h2 class="section-title reveal reveal-delay-1">What We <span>Build</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">7 entirely new feature sets. This is where the majority of effort is focused.</p>

    <div class="features-grid">
      <div class="feature-card reveal">
        <div class="feature-num">01</div>
        <div class="feature-icon">&#x1F4E4;</div>
        <h3>Proposal Upload & Management</h3>
        <p>Upload multiple proposals per RFP (PDF, DOCX, XLSX). Associate with vendors, track status, parse &amp; embed in ChromaDB.</p>
        <div class="feature-tags"><span>Multi-upload</span><span>Vendor link</span><span>Status tracking</span><span>ChromaDB</span></div>
      </div>
      <div class="feature-card reveal reveal-delay-1">
        <div class="feature-num">02</div>
        <div class="feature-icon">&#x1F916;</div>
        <h3>AI-Powered Analysis Engine</h3>
        <p>4-agent AI pipeline: extract requirements, evaluate proposals, compare across criteria, generate recommendations.</p>
        <div class="feature-tags"><span>GPT-4</span><span>6-step pipeline</span><span>Scoring 0-100</span><span>Risk flags</span></div>
      </div>
      <div class="feature-card reveal reveal-delay-2">
        <div class="feature-num">03</div>
        <div class="feature-icon">&#x1F4CA;</div>
        <h3>Evaluation Dashboard</h3>
        <p>Active evaluations with progress, proposals pending review, comparison charts (radar, bar), activity feed.</p>
        <div class="feature-tags"><span>Real-time</span><span>Charts</span><span>Quick actions</span></div>
      </div>
      <div class="feature-card reveal reveal-delay-3">
        <div class="feature-num">04</div>
        <div class="feature-icon">&#x1F50D;</div>
        <h3>Proposal Comparison View</h3>
        <p>Side-by-side comparison of up to 5 proposals. Radar charts, compliance matrix (green/yellow/red), exportable PDF.</p>
        <div class="feature-tags"><span>5 side-by-side</span><span>Radar chart</span><span>PDF export</span></div>
      </div>
      <div class="feature-card reveal reveal-delay-1">
        <div class="feature-num">05</div>
        <div class="feature-icon">&#x2705;</div>
        <h3>Workflow & Approval Engine</h3>
        <p>Configurable multi-stage approval. Role-based stages, SLA tracking, escalation, full audit trail.</p>
        <div class="feature-tags"><span>State machine</span><span>SLA</span><span>Escalation</span><span>Audit</span></div>
      </div>
      <div class="feature-card reveal reveal-delay-2">
        <div class="feature-num">06</div>
        <div class="feature-icon">&#x1F4D1;</div>
        <h3>Evaluation Report Generator</h3>
        <p>Branded PDF reports with executive summary, scoring breakdown, compliance matrix, and approval sign-off.</p>
        <div class="feature-tags"><span>PDF</span><span>Branding</span><span>Executive summary</span></div>
      </div>
      <div class="feature-card reveal reveal-delay-3">
        <div class="feature-num">07</div>
        <div class="feature-icon">&#x1F465;</div>
        <h3>Vendor Management</h3>
        <p>Lightweight vendor registry: contacts, industry, past proposals, performance history, blacklist/preferred flags.</p>
        <div class="feature-tags"><span>Registry</span><span>History</span><span>CRM import</span></div>
      </div>
    </div>
  </div>
</section>

<!-- ===== AI PIPELINE ===== -->
<section class="section" id="pipeline">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> Core Intelligence</div>
    <h2 class="section-title reveal reveal-delay-1">AI <span>Pipeline</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">4 specialized AI agents working in sequence. The brain of Jawabid v2.</p>

    <div class="pipeline-container">
      <div class="pipeline-flow reveal">
        <div class="pipeline-node">
          <div class="node-icon">&#x1F4CB;</div>
          <div class="node-num">AGENT 01</div>
          <h4>Requirements Extractor</h4>
          <p>Parses RFP to extract all requirements, criteria, weights, and disqualifiers</p>
        </div>
        <div class="pipeline-connector"></div>
        <div class="pipeline-node">
          <div class="node-icon">&#x1F50E;</div>
          <div class="node-num">AGENT 02</div>
          <h4>Proposal Evaluator</h4>
          <p>Scores each proposal on compliance (0-100), extracts evidence, flags risks</p>
        </div>
        <div class="pipeline-connector"></div>
        <div class="pipeline-node">
          <div class="node-icon">&#x2696;</div>
          <div class="node-num">AGENT 03</div>
          <h4>Comparative Analyzer</h4>
          <p>Cross-compares all proposals. Strengths, weaknesses, relative rankings</p>
        </div>
        <div class="pipeline-connector"></div>
        <div class="pipeline-node">
          <div class="node-icon">&#x1F3C6;</div>
          <div class="node-num">AGENT 04</div>
          <h4>Recommendation</h4>
          <p>Ranked list with justification, executive summary, negotiation points</p>
        </div>
      </div>

      <h3 class="reveal" style="font-size:1.2rem;margin-top:48px;margin-bottom:16px">10-Step Processing Flow</h3>
      <div class="pipeline-steps reveal">
        <div class="pipeline-step"><div class="step-num">1</div><div class="step-title">Upload RFP</div><div class="step-desc">Parse, extract, embed</div></div>
        <div class="pipeline-step"><div class="step-num">2</div><div class="step-title">Upload Proposals</div><div class="step-desc">Parse 1-N proposals</div></div>
        <div class="pipeline-step"><div class="step-num">3</div><div class="step-title">Start Evaluation</div><div class="step-desc">Celery task dispatched</div></div>
        <div class="pipeline-step"><div class="step-num">4</div><div class="step-title">Extract Criteria</div><div class="step-desc">Agent 1 runs</div></div>
        <div class="pipeline-step"><div class="step-num">5</div><div class="step-title">Score Proposals</div><div class="step-desc">Agent 2 per proposal</div></div>
        <div class="pipeline-step"><div class="step-num">6</div><div class="step-title">Compare All</div><div class="step-desc">Agent 3 analyzes</div></div>
        <div class="pipeline-step"><div class="step-num">7</div><div class="step-title">Recommend</div><div class="step-desc">Agent 4 ranks</div></div>
        <div class="pipeline-step"><div class="step-num">8</div><div class="step-title">User Review</div><div class="step-desc">Start approval</div></div>
        <div class="pipeline-step"><div class="step-num">9</div><div class="step-title">Approvals</div><div class="step-desc">Multi-stage review</div></div>
        <div class="pipeline-step"><div class="step-num">10</div><div class="step-title">Award</div><div class="step-desc">Final decision</div></div>
      </div>

      <div class="callout reveal" style="margin-top:32px">
        <h4>Implementation Note</h4>
        <p>AI pipeline is the <strong>highest-risk</strong> area. Prompt engineering needs 2-4 iterations with real proposal data. Budget extra time. The multi-agent pattern from v1's proposal_agents.py provides the exact architecture to follow.</p>
      </div>
    </div>
  </div>
</section>

<!-- ===== WORKFLOW ===== -->
<section class="section" id="workflow">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> Approval Engine</div>
    <h2 class="section-title reveal reveal-delay-1">Workflow <span>Stages</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">Configurable multi-stage approval process. Every decision audited.</p>

    <div class="workflow-stages">
      <div class="wf-stage reveal">
        <div class="stage-num">1</div>
        <h4>Initial Review</h4>
        <div class="wf-role">Role: Evaluator</div>
        <p>Review AI analysis, override scores, add notes</p>
        <div class="wf-actions"><span>Approve</span><span>Reject</span></div>
      </div>
      <div class="wf-stage reveal reveal-delay-1">
        <div class="stage-num">2</div>
        <h4>Technical Review</h4>
        <div class="wf-role">Role: Manager</div>
        <p>Review technical compliance, verify scoring accuracy</p>
        <div class="wf-actions"><span>Approve</span><span>Reject</span><span>Request Changes</span></div>
      </div>
      <div class="wf-stage reveal reveal-delay-2">
        <div class="stage-num">3</div>
        <h4>Financial Review</h4>
        <div class="wf-role">Role: Finance</div>
        <p>Review pricing, budget alignment, cost analysis</p>
        <div class="wf-actions"><span>Approve</span><span>Reject</span><span>Request Changes</span></div>
      </div>
      <div class="wf-stage reveal reveal-delay-3">
        <div class="stage-num">4</div>
        <h4>Final Approval</h4>
        <div class="wf-role">Role: Admin</div>
        <p>Review recommendation, select winning proposal</p>
        <div class="wf-actions"><span>Award</span><span>Reject All</span></div>
      </div>
    </div>

    <div class="callout reveal" style="margin-top:36px">
      <h4>Technical Design</h4>
      <p>Built on: <strong>WorkflowTemplate</strong> (reusable definitions), <strong>ApprovalStage</strong> (role + SLA), <strong>EvaluationWorkflow</strong> (active instance), <strong>ApprovalDecision</strong> (audit record). Strict state machine transitions with auto-notifications and SLA escalation.</p>
    </div>
  </div>
</section>

<!-- ===== TIMELINE ===== -->
<section class="section" id="timeline" style="padding-bottom:80px">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> Development Roadmap</div>
    <h2 class="section-title reveal reveal-delay-1">6-Phase <span>Timeline</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">~105 hours across 7-10 working days. AI-accelerated development with Claude Code.</p>

    <div class="timeline">
      <div class="timeline-item reveal">
        <div class="timeline-dot">P1</div>
        <div class="timeline-content">
          <div class="tl-header">
            <div><h4>Foundation</h4><span class="tl-hours">~12 hours</span></div>
            <span class="tl-days">Day 1-2</span>
          </div>
          <p>Database schema, models, migrations, vendor CRUD, cleanup of deprecated files.</p>
          <div class="tl-tasks"><span>4 new models</span><span>5 new schemas</span><span>Alembic migrations</span><span>Vendor CRUD</span><span>Auth evaluator role</span><span>Remove deprecated</span></div>
          <div class="progress-bar"><div class="fill" style="background:var(--orange)" data-width="11"></div></div>
        </div>
      </div>

      <div class="timeline-item reveal">
        <div class="timeline-dot">P2</div>
        <div class="timeline-content">
          <div class="tl-header">
            <div><h4>AI Evaluation Pipeline</h4><span class="tl-hours">~30 hours &bull; <span style="color:var(--red)">Highest Risk</span></span></div>
            <span class="tl-days">Day 3-5</span>
          </div>
          <p>Most complex phase. 4 AI agents + orchestration + scoring + comparison services.</p>
          <div class="tl-tasks"><span>4 AI Agents</span><span>Evaluation service</span><span>Scoring service</span><span>Comparison service</span><span>Celery tasks</span><span>Prompt iteration</span></div>
          <div class="progress-bar"><div class="fill" style="background:var(--red)" data-width="29"></div></div>
        </div>
      </div>

      <div class="timeline-item reveal">
        <div class="timeline-dot">P3</div>
        <div class="timeline-content">
          <div class="tl-header">
            <div><h4>Workflow & Approval Engine</h4><span class="tl-hours">~13.5 hours</span></div>
            <span class="tl-days">Day 5-6</span>
          </div>
          <p>State machine, approval endpoints, notifications, SLA tracking with escalation.</p>
          <div class="tl-tasks"><span>State machine</span><span>Approval API</span><span>Templates CRUD</span><span>Notifications</span><span>SLA tracking</span><span>Edge cases</span></div>
          <div class="progress-bar"><div class="fill" style="background:var(--blue)" data-width="13"></div></div>
        </div>
      </div>

      <div class="timeline-item reveal">
        <div class="timeline-dot">P4</div>
        <div class="timeline-content">
          <div class="tl-header">
            <div><h4>Frontend &mdash; Core Pages</h4><span class="tl-hours">~18 hours</span></div>
            <span class="tl-days">Day 6-7</span>
          </div>
          <p>Dashboard, RFP views, proposal upload/detail/comparison, criteria setup. Leverages existing shadcn/ui.</p>
          <div class="tl-tasks"><span>Dashboard rewrite</span><span>ProposalUpload</span><span>RFPDetail rewrite</span><span>ProposalDetail</span><span>Comparison view</span><span>CriteriaSetup</span></div>
          <div class="progress-bar"><div class="fill" style="background:var(--purple)" data-width="17"></div></div>
        </div>
      </div>

      <div class="timeline-item reveal">
        <div class="timeline-dot">P5</div>
        <div class="timeline-content">
          <div class="tl-header">
            <div><h4>Frontend &mdash; Workflow, Vendors, Components</h4><span class="tl-hours">~17 hours</span></div>
            <span class="tl-days">Day 8-9</span>
          </div>
          <p>Approval UI, vendor management, reusable evaluation components, WorkflowBuilder.</p>
          <div class="tl-tasks"><span>ApprovalDashboard</span><span>WorkflowBuilder</span><span>VendorList</span><span>9 new components</span><span>MyTasks rewrite</span><span>EvaluationReport</span></div>
          <div class="progress-bar"><div class="fill" style="background:var(--cyan)" data-width="16"></div></div>
        </div>
      </div>

      <div class="timeline-item reveal">
        <div class="timeline-dot">P6</div>
        <div class="timeline-content">
          <div class="tl-header">
            <div><h4>Integration, i18n & Testing</h4><span class="tl-hours">~15 hours</span></div>
            <span class="tl-days">Day 9-10</span>
          </div>
          <p>Integration testing, EN/AR translations (~200 keys each), PDF report generator, UI polish.</p>
          <div class="tl-tasks"><span>i18n (EN + AR)</span><span>E2E testing</span><span>Bug fixes</span><span>Report PDF</span><span>Performance</span><span>UI polish</span></div>
          <div class="progress-bar"><div class="fill" style="background:var(--green)" data-width="14"></div></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ===== RISKS ===== -->
<section class="section" id="risks">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> Risk Assessment</div>
    <h2 class="section-title reveal reveal-delay-1">Risks & <span>Mitigation</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">8 identified risks with concrete mitigation strategies.</p>

    <div class="risks-grid">
      <div class="risk-row reveal" style="background:var(--bg3);border:none">
        <div style="font-size:0.75rem;color:var(--text3);text-transform:uppercase;letter-spacing:1px;font-weight:600">Risk</div>
        <div style="font-size:0.75rem;color:var(--text3);text-transform:uppercase;letter-spacing:1px;font-weight:600;text-align:center">Impact</div>
        <div style="font-size:0.75rem;color:var(--text3);text-transform:uppercase;letter-spacing:1px;font-weight:600;text-align:center">Likelihood</div>
        <div style="font-size:0.75rem;color:var(--text3);text-transform:uppercase;letter-spacing:1px;font-weight:600">Mitigation</div>
      </div>
      <div class="risk-row reveal">
        <div class="risk-name">AI scoring inconsistency</div>
        <div class="risk-badge risk-high">HIGH</div>
        <div class="risk-badge risk-medium">MEDIUM</div>
        <div class="risk-mitigation">Human override. Structured prompts. Test with 5+ diverse proposals.</div>
      </div>
      <div class="risk-row reveal reveal-delay-1">
        <div class="risk-name">Large proposal processing</div>
        <div class="risk-badge risk-medium">MEDIUM</div>
        <div class="risk-badge risk-high">HIGH</div>
        <div class="risk-mitigation">Celery async + Redis. Chunk for RAG. Progress UI. 30min timeout.</div>
      </div>
      <div class="risk-row reveal reveal-delay-1">
        <div class="risk-name">Prompt engineering iterations</div>
        <div class="risk-badge risk-high">HIGH</div>
        <div class="risk-badge risk-medium">MEDIUM</div>
        <div class="risk-mitigation">Start simple, iterate. Use v1 experience. Budget 2 extra days.</div>
      </div>
      <div class="risk-row reveal reveal-delay-2">
        <div class="risk-name">Workflow edge cases</div>
        <div class="risk-badge risk-medium">MEDIUM</div>
        <div class="risk-badge risk-medium">MEDIUM</div>
        <div class="risk-mitigation">Start linear. Add parallel in v2.1. Thorough state tests.</div>
      </div>
      <div class="risk-row reveal reveal-delay-2">
        <div class="risk-name">Database migration</div>
        <div class="risk-badge risk-high">HIGH</div>
        <div class="risk-badge risk-low">LOW</div>
        <div class="risk-mitigation">Test on DB copy. Full backup. Rollback plan ready.</div>
      </div>
      <div class="risk-row reveal reveal-delay-3">
        <div class="risk-name">OpenAI API costs</div>
        <div class="risk-badge risk-medium">MEDIUM</div>
        <div class="risk-badge risk-high">HIGH</div>
        <div class="risk-mitigation">Token tracking exists. Show cost estimate. Consider GPT-3.5 for initial scoring.</div>
      </div>
      <div class="risk-row reveal reveal-delay-3">
        <div class="risk-name">Chart/viz complexity</div>
        <div class="risk-badge risk-low">LOW</div>
        <div class="risk-badge risk-medium">MEDIUM</div>
        <div class="risk-mitigation">Use recharts (already installed). Tables first, charts iteratively.</div>
      </div>
      <div class="risk-row reveal reveal-delay-4">
        <div class="risk-name">Breaking auth/admin</div>
        <div class="risk-badge risk-high">HIGH</div>
        <div class="risk-badge risk-low">LOW</div>
        <div class="risk-mitigation">Keep untouched. Run tests after each phase. Zero changes to auth core.</div>
      </div>
    </div>
  </div>
</section>

<!-- ===== FILE CHANGE MATRIX ===== -->
<section class="section" id="matrix">
  <div class="section-inner">
    <div class="section-label reveal"><span class="dot"></span> Complete File Matrix</div>
    <h2 class="section-title reveal reveal-delay-1">The <span>Numbers</span></h2>
    <p class="section-subtitle reveal reveal-delay-2">226 existing files + 42 new files. Here's the breakdown by action type.</p>

    <div class="matrix-grid reveal">
      <div class="matrix-card mc-keep"><div class="mc-num" data-count="129">0</div><div class="mc-label">Keep</div></div>
      <div class="matrix-card mc-modify"><div class="mc-num" data-count="34">0</div><div class="mc-label">Modify</div></div>
      <div class="matrix-card mc-rewrite"><div class="mc-num" data-count="19">0</div><div class="mc-label">Rewrite</div></div>
      <div class="matrix-card mc-remove"><div class="mc-num" data-count="28">0</div><div class="mc-label">Remove</div></div>
      <div class="matrix-card mc-create"><div class="mc-num" data-count="42">0</div><div class="mc-label">Create</div></div>
    </div>

    <!-- Category breakdown -->
    <div style="margin-top:48px" class="reveal">
      <table class="comparison-table">
        <thead>
          <tr>
            <th>Category</th>
            <th style="color:var(--text2)">Files</th>
            <th style="color:var(--green)">Keep</th>
            <th style="color:var(--blue)">Modify</th>
            <th style="color:var(--amber)">Rewrite</th>
            <th style="color:var(--red)">Remove</th>
            <th style="color:var(--purple)">Create</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Models</td><td>32 + 4</td><td style="color:var(--green)">22</td><td style="color:var(--blue)">3</td><td style="color:var(--amber)">2</td><td style="color:var(--red)">3-5</td><td style="color:var(--purple)">4</td></tr>
          <tr><td>Services</td><td>30 + 6</td><td style="color:var(--green)">6</td><td style="color:var(--blue)">5</td><td style="color:var(--amber)">3</td><td style="color:var(--red)">9-16</td><td style="color:var(--purple)">6</td></tr>
          <tr><td>Endpoints</td><td>29 + 4</td><td style="color:var(--green)">11-15</td><td style="color:var(--blue)">4</td><td style="color:var(--amber)">5</td><td style="color:var(--red)">5</td><td style="color:var(--purple)">4</td></tr>
          <tr><td>Schemas</td><td>20 + 5</td><td style="color:var(--green)">11</td><td style="color:var(--blue)">4</td><td style="color:var(--amber)">2</td><td style="color:var(--red)">3</td><td style="color:var(--purple)">5</td></tr>
          <tr><td>FE Pages</td><td>25 + 9</td><td style="color:var(--green)">6</td><td style="color:var(--blue)">11</td><td style="color:var(--amber)">7</td><td style="color:var(--red)">1</td><td style="color:var(--purple)">9</td></tr>
          <tr><td>FE Components</td><td>57 + 9</td><td style="color:var(--green)">57</td><td style="color:var(--blue)">1</td><td style="color:var(--amber)">0</td><td style="color:var(--red)">0</td><td style="color:var(--purple)">9</td></tr>
          <tr><td>Core/Other</td><td>23 + 5</td><td style="color:var(--green)">16</td><td style="color:var(--blue)">6</td><td style="color:var(--amber)">0</td><td style="color:var(--red)">0</td><td style="color:var(--purple)">5</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Summary CTA -->
    <div class="summary-box reveal">
      <h3>Ready to Execute</h3>
      <p style="color:var(--text2);max-width:600px;margin:0 auto 24px;font-size:1rem">
        The migration plan leverages 80% of our existing codebase to deliver a fundamentally new product.
      </p>
      <div class="summary-stats">
        <div class="summary-stat"><div class="num">7-10</div><div class="label">Working Days</div></div>
        <div class="summary-stat"><div class="num">3</div><div class="label">Developers</div></div>
        <div class="summary-stat"><div class="num">~105h</div><div class="label">Total Effort</div></div>
      </div>
      <p style="color:var(--text3);font-size:0.85rem;margin-top:8px">
        Optimistic: 7 days &bull; Realistic: 10 days &bull; Pessimistic: 14 days<br>
        <strong style="color:var(--orange)">Without Claude Code: 25-35 days</strong>
      </p>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <p>Jawabid v2 Migration Plan &bull; Confidential &bull; February 2026</p>
  <p style="margin-top:4px;color:var(--text3)">Development Tool: Claude Code (AI-Assisted)</p>
</footer>

<!-- Firebase Config (gitignored - contains your credentials) -->
<script src="firebase-config.js"></script>
<!-- Firebase SDK (compat mode) -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

<!-- Scripts -->
<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script>
// ===== THREE.JS PARTICLE NETWORK BACKGROUND =====
(function(){
  const canvas = document.getElementById('bg-canvas');
  const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.z = 50;

  // Particles
  const PARTICLE_COUNT = 400;
  const positions = new Float32Array(PARTICLE_COUNT * 3);
  const velocities = [];
  const spread = 80;

  for (let i = 0; i < PARTICLE_COUNT; i++) {
    positions[i * 3] = (Math.random() - 0.5) * spread;
    positions[i * 3 + 1] = (Math.random() - 0.5) * spread;
    positions[i * 3 + 2] = (Math.random() - 0.5) * spread * 0.5;
    velocities.push({
      x: (Math.random() - 0.5) * 0.015,
      y: (Math.random() - 0.5) * 0.015,
      z: (Math.random() - 0.5) * 0.008
    });
  }

  const particleGeo = new THREE.BufferGeometry();
  particleGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));

  const particleMat = new THREE.PointsMaterial({
    color: 0xe8913a,
    size: 0.3,
    transparent: true,
    opacity: 0.6,
    blending: THREE.AdditiveBlending,
    depthWrite: false
  });

  const particles = new THREE.Points(particleGeo, particleMat);
  scene.add(particles);

  // Connection lines
  const lineGeo = new THREE.BufferGeometry();
  const linePositions = new Float32Array(PARTICLE_COUNT * PARTICLE_COUNT * 0.01 * 6);
  lineGeo.setAttribute('position', new THREE.BufferAttribute(linePositions, 3));

  const lineMat = new THREE.LineBasicMaterial({
    color: 0x4a9eff,
    transparent: true,
    opacity: 0.08,
    blending: THREE.AdditiveBlending,
    depthWrite: false
  });

  const lines = new THREE.LineSegments(lineGeo, lineMat);
  scene.add(lines);

  // Floating geometric shapes
  const shapes = [];
  const shapeGeos = [
    new THREE.IcosahedronGeometry(1, 0),
    new THREE.OctahedronGeometry(1, 0),
    new THREE.TetrahedronGeometry(1, 0)
  ];
  const shapeMat = new THREE.MeshBasicMaterial({
    color: 0xe8913a,
    wireframe: true,
    transparent: true,
    opacity: 0.08
  });

  for (let i = 0; i < 8; i++) {
    const geo = shapeGeos[i % shapeGeos.length];
    const mesh = new THREE.Mesh(geo, shapeMat.clone());
    mesh.position.set(
      (Math.random() - 0.5) * 60,
      (Math.random() - 0.5) * 60,
      (Math.random() - 0.5) * 20 - 10
    );
    const s = Math.random() * 2 + 1;
    mesh.scale.set(s, s, s);
    mesh.userData = {
      rotSpeed: { x: (Math.random() - 0.5) * 0.005, y: (Math.random() - 0.5) * 0.005 },
      floatSpeed: Math.random() * 0.5 + 0.5,
      floatAmp: Math.random() * 2 + 1,
      baseY: mesh.position.y
    };
    shapes.push(mesh);
    scene.add(mesh);
  }

  // Mouse tracking
  let mouseX = 0, mouseY = 0;
  document.addEventListener('mousemove', (e) => {
    mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
    mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
  });

  // Scroll tracking
  let scrollPct = 0;
  window.addEventListener('scroll', () => {
    scrollPct = window.scrollY / (document.body.scrollHeight - window.innerHeight);
  });

  // Resize
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });

  // Colors for scroll-based shifting
  const colorOrange = new THREE.Color(0xe8913a);
  const colorBlue = new THREE.Color(0x4a9eff);
  const colorCyan = new THREE.Color(0x06b6d4);
  const colorGreen = new THREE.Color(0x22c55e);

  // Animation
  const clock = new THREE.Clock();
  function animate() {
    requestAnimationFrame(animate);
    const t = clock.getElapsedTime();
    const posArr = particleGeo.attributes.position.array;

    // Move particles
    for (let i = 0; i < PARTICLE_COUNT; i++) {
      posArr[i*3] += velocities[i].x;
      posArr[i*3+1] += velocities[i].y;
      posArr[i*3+2] += velocities[i].z;

      // Wrap around
      if (posArr[i*3] > spread/2) posArr[i*3] = -spread/2;
      if (posArr[i*3] < -spread/2) posArr[i*3] = spread/2;
      if (posArr[i*3+1] > spread/2) posArr[i*3+1] = -spread/2;
      if (posArr[i*3+1] < -spread/2) posArr[i*3+1] = spread/2;
    }
    particleGeo.attributes.position.needsUpdate = true;

    // Update connections
    let lineIdx = 0;
    const maxDist = 12;
    const linePosArr = lineGeo.attributes.position.array;
    for (let i = 0; i < PARTICLE_COUNT; i++) {
      for (let j = i + 1; j < PARTICLE_COUNT; j++) {
        const dx = posArr[i*3] - posArr[j*3];
        const dy = posArr[i*3+1] - posArr[j*3+1];
        const dz = posArr[i*3+2] - posArr[j*3+2];
        const dist = dx*dx + dy*dy + dz*dz;
        if (dist < maxDist * maxDist && lineIdx < linePositions.length - 6) {
          linePosArr[lineIdx++] = posArr[i*3];
          linePosArr[lineIdx++] = posArr[i*3+1];
          linePosArr[lineIdx++] = posArr[i*3+2];
          linePosArr[lineIdx++] = posArr[j*3];
          linePosArr[lineIdx++] = posArr[j*3+1];
          linePosArr[lineIdx++] = posArr[j*3+2];
        }
      }
    }
    // Zero out unused
    for (let k = lineIdx; k < linePosArr.length; k++) linePosArr[k] = 0;
    lineGeo.attributes.position.needsUpdate = true;
    lineGeo.setDrawRange(0, lineIdx / 3);

    // Scroll-based color shift
    const c = new THREE.Color();
    if (scrollPct < 0.25) c.lerpColors(colorOrange, colorBlue, scrollPct * 4);
    else if (scrollPct < 0.5) c.lerpColors(colorBlue, colorCyan, (scrollPct - 0.25) * 4);
    else if (scrollPct < 0.75) c.lerpColors(colorCyan, colorGreen, (scrollPct - 0.5) * 4);
    else c.lerpColors(colorGreen, colorOrange, (scrollPct - 0.75) * 4);
    particleMat.color.copy(c);

    // Rotate shapes
    shapes.forEach((s) => {
      s.rotation.x += s.userData.rotSpeed.x;
      s.rotation.y += s.userData.rotSpeed.y;
      s.position.y = s.userData.baseY + Math.sin(t * s.userData.floatSpeed) * s.userData.floatAmp;
    });

    // Camera parallax
    camera.position.x += (mouseX * 3 - camera.position.x) * 0.02;
    camera.position.y += (-mouseY * 3 - camera.position.y) * 0.02;
    camera.lookAt(0, 0, 0);

    // Slight rotation based on scroll
    particles.rotation.y = scrollPct * Math.PI * 0.5;
    particles.rotation.x = scrollPct * Math.PI * 0.15;

    renderer.render(scene, camera);
  }
  animate();
})();

// ===== SCROLL ANIMATIONS =====
// Intersection Observer for reveal animations
const revealObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

// Scroll progress bar
window.addEventListener('scroll', () => {
  const pct = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
  document.getElementById('scrollProgress').style.width = pct + '%';

  // Nav scroll state
  document.getElementById('nav').classList.toggle('scrolled', window.scrollY > 50);
});

// Active nav link
const sections = document.querySelectorAll('.section, .hero');
const navLinks = document.querySelectorAll('.nav-links a');
const navObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const id = entry.target.id;
      navLinks.forEach(l => l.classList.remove('active'));
      const active = document.querySelector(`.nav-links a[href="#${id}"]`);
      if (active) active.classList.add('active');
    }
  });
}, { threshold: 0.3 });
sections.forEach(s => navObserver.observe(s));

// ===== ANIMATED COUNTERS =====
function animateCounter(el, target, duration = 2000) {
  const start = performance.now();
  const isFloat = String(target).includes('.');
  function update(now) {
    const elapsed = now - start;
    const progress = Math.min(elapsed / duration, 1);
    const eased = 1 - Math.pow(1 - progress, 3); // ease-out cubic
    const current = Math.round(eased * target);
    el.textContent = current;
    if (progress < 1) requestAnimationFrame(update);
    else el.textContent = target;
  }
  requestAnimationFrame(update);
}

// Observe counter elements
const counterObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting && !entry.target.dataset.counted) {
      entry.target.dataset.counted = 'true';
      const target = parseInt(entry.target.dataset.count || entry.target.textContent);
      if (!isNaN(target)) animateCounter(entry.target, target);
    }
  });
}, { threshold: 0.5 });

document.querySelectorAll('[data-count]').forEach(el => counterObserver.observe(el));
document.querySelectorAll('.mc-num[data-count]').forEach(el => counterObserver.observe(el));

// ===== DONUT CHART ANIMATION =====
const donutObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const fill = document.getElementById('donutFill');
      fill.classList.add('animate');
      // Animate percentage text
      const pctEl = document.getElementById('donutPct');
      let current = 0;
      const interval = setInterval(() => {
        current += 1;
        pctEl.textContent = current + '%';
        if (current >= 80) clearInterval(interval);
      }, 25);
      donutObserver.unobserve(entry.target);
    }
  });
}, { threshold: 0.5 });
donutObserver.observe(document.querySelector('.donut-container'));

// ===== PROGRESS BAR ANIMATION =====
const progressObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const fill = entry.target.querySelector('.fill');
      if (fill && !fill.dataset.animated) {
        fill.dataset.animated = 'true';
        const w = fill.dataset.width;
        fill.style.width = w + '%';
      }
    }
  });
}, { threshold: 0.3 });
document.querySelectorAll('.progress-bar').forEach(el => progressObserver.observe(el));

// ===== SMOOTH SCROLL =====
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
});

// ===== FIREBASE CONFIG & LOGIN =====
// REPLACE THIS with your Firebase project config
// IMPORTANT: Create a firebase-config.js file (gitignored) with your config
// See README.md for setup instructions
const firebaseConfig = window.FIREBASE_CONFIG || {
  apiKey: "",
  authDomain: "",
  databaseURL: "",
  projectId: "",
  storageBucket: "",
  messagingSenderId: "",
  appId: ""
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Simple hash for client-side credential check
function simpleHash(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    const c = str.charCodeAt(i);
    hash = ((hash << 5) - hash) + c;
    hash |= 0;
  }
  return hash;
}

// Credentials: ceo / jawabid
const VALID_CREDS = { user: simpleHash('ceo'), pass: simpleHash('jawabid') };

const loginOverlay = document.getElementById('loginOverlay');
const loginBtn = document.getElementById('loginBtn');
const loginUser = document.getElementById('loginUser');
const loginPass = document.getElementById('loginPass');
const loginError = document.getElementById('loginError');

// Check if already logged in
if (sessionStorage.getItem('jawabid_session')) {
  loginOverlay.classList.add('hidden');
  startTracking(sessionStorage.getItem('jawabid_user'), sessionStorage.getItem('jawabid_session'));
}

loginBtn.addEventListener('click', attemptLogin);
loginPass.addEventListener('keydown', (e) => { if (e.key === 'Enter') attemptLogin(); });
loginUser.addEventListener('keydown', (e) => { if (e.key === 'Enter') loginPass.focus(); });

function attemptLogin() {
  const user = loginUser.value.trim();
  const pass = loginPass.value;
  if (simpleHash(user) === VALID_CREDS.user && simpleHash(pass) === VALID_CREDS.pass) {
    loginError.classList.remove('show');
    const sessionId = 'ses_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);
    sessionStorage.setItem('jawabid_session', sessionId);
    sessionStorage.setItem('jawabid_user', user);
    loginOverlay.classList.add('hidden');
    startTracking(user, sessionId);
  } else {
    loginError.classList.add('show');
    loginPass.value = '';
    loginPass.focus();
  }
}

// ===== TRACKING MODULE =====
function startTracking(username, sessionId) {
  const sessionRef = db.ref('jawabid-tracking/sessions/' + sessionId);
  const eventsRef = sessionRef.child('events');
  const startTime = Date.now();
  let activeTime = 0;
  let lastActiveTs = startTime;
  let isVisible = true;

  // Write session metadata
  sessionRef.update({
    user: username,
    startTime: startTime,
    userAgent: navigator.userAgent,
    screenSize: screen.width + 'x' + screen.height,
    viewportSize: window.innerWidth + 'x' + window.innerHeight,
    url: location.href,
    status: 'active'
  });

  // Update endTime periodically & on unload
  function updateEndTime() {
    if (isVisible) {
      activeTime += Date.now() - lastActiveTs;
      lastActiveTs = Date.now();
    }
    sessionRef.update({
      endTime: Date.now(),
      activeTime: activeTime,
      status: 'active'
    });
  }
  const endTimeInterval = setInterval(updateEndTime, 5000);

  window.addEventListener('beforeunload', () => {
    updateEndTime();
    sessionRef.update({ status: 'ended' });
  });

  // --- Mouse Position Tracking (sampled 200ms, batched 2s) ---
  let mousePositions = [];
  let lastMouseX = 0, lastMouseY = 0;

  document.addEventListener('mousemove', (e) => {
    lastMouseX = e.clientX;
    lastMouseY = e.clientY;
  });

  setInterval(() => {
    mousePositions.push({
      x: lastMouseX,
      y: lastMouseY,
      pctX: +(lastMouseX / window.innerWidth * 100).toFixed(1),
      pctY: +(lastMouseY / window.innerHeight * 100).toFixed(1),
      t: Date.now()
    });
  }, 200);

  setInterval(() => {
    if (mousePositions.length > 0) {
      eventsRef.push({
        type: 'mouse_batch',
        timestamp: Date.now(),
        data: { positions: mousePositions }
      });
      mousePositions = [];
    }
  }, 2000);

  // --- Click Tracking ---
  document.addEventListener('click', (e) => {
    const el = e.target;
    const text = (el.textContent || '').trim().substring(0, 80);
    const tag = el.tagName.toLowerCase();
    const classes = el.className && typeof el.className === 'string' ? el.className.substring(0, 120) : '';
    const id = el.id || '';
    const closestSection = el.closest('section, .hero');
    eventsRef.push({
      type: 'click',
      timestamp: Date.now(),
      data: {
        x: e.clientX,
        y: e.clientY,
        pctX: +(e.clientX / window.innerWidth * 100).toFixed(1),
        pctY: +(e.clientY / window.innerHeight * 100).toFixed(1),
        pageX: e.pageX,
        pageY: e.pageY,
        tag: tag,
        id: id,
        classes: classes,
        text: text,
        section: closestSection ? closestSection.id : ''
      }
    });
  });

  // --- Scroll Tracking (throttled 300ms) ---
  let scrollThrottle = null;
  let lastScrollY = 0;
  window.addEventListener('scroll', () => {
    if (scrollThrottle) return;
    scrollThrottle = setTimeout(() => {
      const scrollY = window.scrollY;
      const maxScroll = document.body.scrollHeight - window.innerHeight;
      const scrollPctVal = maxScroll > 0 ? +(scrollY / maxScroll * 100).toFixed(1) : 0;
      const direction = scrollY > lastScrollY ? 'down' : 'up';
      lastScrollY = scrollY;

      // Find active section
      let activeSection = '';
      document.querySelectorAll('section, .hero').forEach((s) => {
        const rect = s.getBoundingClientRect();
        if (rect.top <= window.innerHeight / 2 && rect.bottom >= window.innerHeight / 2) {
          activeSection = s.id;
        }
      });

      eventsRef.push({
        type: 'scroll',
        timestamp: Date.now(),
        data: {
          scrollY: scrollY,
          scrollPct: scrollPctVal,
          direction: direction,
          section: activeSection
        }
      });
      scrollThrottle = null;
    }, 300);
  });

  // --- Section Enter/Exit (IntersectionObserver) ---
  const sectionTimes = {};
  const sectionObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const id = entry.target.id;
      if (!id) return;
      if (entry.isIntersecting) {
        sectionTimes[id] = Date.now();
        eventsRef.push({
          type: 'section_enter',
          timestamp: Date.now(),
          data: { section: id }
        });
      } else if (sectionTimes[id]) {
        const duration = Date.now() - sectionTimes[id];
        eventsRef.push({
          type: 'section_exit',
          timestamp: Date.now(),
          data: { section: id, duration: duration }
        });
        delete sectionTimes[id];
      }
    });
  }, { threshold: 0.3 });

  document.querySelectorAll('section, .hero').forEach(s => {
    if (s.id) sectionObserver.observe(s);
  });

  // --- Hover Tracking on Key Elements ---
  const hoverTargets = document.querySelectorAll('.feature-card, .pipeline-node, .wf-stage, .adv-card, .risk-row, .timeline-content, .matrix-card, .transform-card');
  hoverTargets.forEach(el => {
    let hoverStart = 0;
    el.addEventListener('mouseenter', () => {
      hoverStart = Date.now();
    });
    el.addEventListener('mouseleave', () => {
      if (hoverStart) {
        const duration = Date.now() - hoverStart;
        if (duration > 300) { // Only log hovers > 300ms
          const tag = el.tagName.toLowerCase();
          const classes = el.className && typeof el.className === 'string' ? el.className.substring(0, 80) : '';
          const heading = el.querySelector('h3, h4');
          const text = heading ? heading.textContent.trim().substring(0, 60) : '';
          const closestSection = el.closest('section, .hero');
          eventsRef.push({
            type: 'hover',
            timestamp: Date.now(),
            data: {
              element: tag + '.' + (classes.split(' ')[0] || ''),
              text: text,
              duration: duration,
              section: closestSection ? closestSection.id : ''
            }
          });
        }
        hoverStart = 0;
      }
    });
  });

  // --- Nav Click Tracking ---
  document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => {
      eventsRef.push({
        type: 'nav_click',
        timestamp: Date.now(),
        data: { link: link.getAttribute('href'), text: link.textContent.trim() }
      });
    });
  });

  // --- Tab Visibility ---
  document.addEventListener('visibilitychange', () => {
    const nowVisible = !document.hidden;
    if (nowVisible) {
      lastActiveTs = Date.now();
    } else {
      activeTime += Date.now() - lastActiveTs;
    }
    isVisible = nowVisible;
    eventsRef.push({
      type: 'visibility',
      timestamp: Date.now(),
      data: { visible: nowVisible }
    });
  });

  // --- Window Resize ---
  let resizeThrottle = null;
  window.addEventListener('resize', () => {
    if (resizeThrottle) return;
    resizeThrottle = setTimeout(() => {
      eventsRef.push({
        type: 'resize',
        timestamp: Date.now(),
        data: { width: window.innerWidth, height: window.innerHeight }
      });
      resizeThrottle = null;
    }, 1000);
  });
}
</script>
</body>
</html>
